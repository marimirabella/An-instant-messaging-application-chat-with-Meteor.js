[{"type":"js","data":"/* Imports for global scope */\n\nMongo = Package.mongo.Mongo;\nSession = Package.session.Session;\n$ = Package.jquery.$;\njQuery = Package.jquery.jQuery;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nDate = Package['es5-shim'].Date;\nparseInt = Package['es5-shim'].parseInt;\nECMAScript = Package.ecmascript.ECMAScript;\nRouter = Package['iron:router'].Router;\nRouteController = Package['iron:router'].RouteController;\naccountsUIBootstrap3 = Package['ian:accounts-ui-bootstrap-3'].accountsUIBootstrap3;\nMeteor = Package.meteor.Meteor;\nWebApp = Package.webapp.WebApp;\n_ = Package.underscore._;\nDDP = Package['ddp-client'].DDP;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nSpacebars = Package.spacebars.Spacebars;\nTemplate = Package.templating.Template;\nbabelHelpers = Package['babel-runtime'].babelHelpers;\nSymbol = Package['ecmascript-runtime'].Symbol;\nMap = Package['ecmascript-runtime'].Map;\nSet = Package['ecmascript-runtime'].Set;\nPromise = Package.promise.Promise;\nIron = Package['iron:core'].Iron;\nAccounts = Package['accounts-base'].Accounts;\nAccountsClient = Package['accounts-base'].AccountsClient;\nAutoupdate = Package.autoupdate.Autoupdate;\nReload = Package.reload.Reload;\nHTML = Package.htmljs.HTML;\n\n","servePath":"/packages/global-imports.js"},{"type":"js","data":"(function(){\nTemplate.__checkName(\"chat_page\");\nTemplate[\"chat_page\"] = new Template(\"Template.chat_page\", (function() {\n  var view = this;\n  return [ HTML.H2({\n    \"class\": \"header\"\n  }, \"Type in the box below to send a message to \", HTML.B(Blaze.View(\"lookup:other_user\", function() {\n    return Spacebars.mustache(view.lookup(\"other_user\"));\n  })), HTML.IMG({\n    src: function() {\n      return [ \"/\", Spacebars.mustache(view.lookup(\"avatar\")) ];\n    },\n    \"class\": \"avatar_img\"\n  }), \"!\"), \"\\n\t\", HTML.DIV({\n    \"class\": \"row\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"col-md-12\"\n  }, \"\\n\t\t\t\", HTML.DIV({\n    \"class\": \"well well-lg\"\n  }, \"\\n\t\t\t\", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"messages\"));\n  }, function() {\n    return [ \"\\n\t\t\t\", Spacebars.include(view.lookupTemplate(\"chat_message\")), \"\\n\t\t\t\" ];\n  }), \"\\n\t\t\t\"), \"\t\\n\t\t\"), \"\\n\t\"), \"\\n    \", HTML.DIV({\n    \"class\": \"row\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"col-md-12\"\n  }, \"\\n\t\t\t\", HTML.FORM({\n    \"class\": \"js-send-chat\"\n  }, \"\\n\t\t\t\", HTML.Raw('<input class=\"input form-control\" type=\"text\" name=\"chat\" placeholder=\"type a message here...\">'), \"\\n\t\t\t\", HTML.P(\"\\n\t\t\t\", HTML.Raw(\"<br>\"), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":D\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":D\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \"o_o\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \"o_o\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":)\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":)\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":(\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":(\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \"-_-\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \"-_-\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":P\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":P\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":O\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":O\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \"8)\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \"8)\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":smirk:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":smirk:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":[\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":[\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":ninja:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":ninja:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":nerd:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":nerd:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":S\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":S\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":bashful:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":bashful:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":crying:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":crying:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":puke:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":puke:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":love:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":love:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":devil:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":devil:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":angel:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":angel:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \">:D\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \">:D\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":wtf:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":wtf:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":sweating:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":sweating:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":embarrassed:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":embarrassed:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \"x-D\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \"x-D\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \"O.o\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \"O.o\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \";)\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \";)\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":\\\\\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":\\\\\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":beer:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":beer:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":poop:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":poop:\"));\n  })), \"\\n\t\t\t\"), \"\\n\t\t\t\", HTML.Raw('<button class=\"btn btn-info btn-lg\">Send</button>'), \"\\n\t\t\"), \"\\n\t\t\"), \"\\n\t\") ];\n}));\n\nTemplate.__checkName(\"chat_message\");\nTemplate[\"chat_message\"] = new Template(\"Template.chat_message\", (function() {\n  var view = this;\n  return [ HTML.DIV({\n    \"class\": \"row\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"col-md-1\"\n  }, \"\\n\t\t\t\", HTML.IMG({\n    src: function() {\n      return [ \"/\", Spacebars.mustache(view.lookup(\"avatar\")) ];\n    },\n    \"class\": \"avatar_img\"\n  }), \" \", HTML.Raw(\"<!-- display avatar -->\"), \"\\n\t\t\"), \"\\n\t\t\", HTML.DIV({\n    \"class\": \"col-md-11 text\"\n  }, \"\\n\t\t\t\", HTML.B(Blaze.View(\"lookup:username\", function() {\n    return Spacebars.mustache(view.lookup(\"username\"));\n  })), \" \", HTML.Raw(\"<!-- display username -->\"), \"\\n\t\t\t\", HTML.Raw(\"<br>\"), \"\\n\t\t\t\", Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), view.lookup(\"text\")));\n  }), \"\\n\t\t\"), \"\\n\t\"), HTML.Raw(\"\\n\t<br>\") ];\n}));\n\n}).call(this);\n","servePath":"/client/template.chat_page.js","sourceMap":{"version":3,"sources":["meteor://ðŸ’»app/client/template.chat_page.js"],"names":[],"mappings":"YAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/client/template.chat_page.js","sourcesContent":["\nTemplate.__checkName(\"chat_page\");\nTemplate[\"chat_page\"] = new Template(\"Template.chat_page\", (function() {\n  var view = this;\n  return [ HTML.H2({\n    \"class\": \"header\"\n  }, \"Type in the box below to send a message to \", HTML.B(Blaze.View(\"lookup:other_user\", function() {\n    return Spacebars.mustache(view.lookup(\"other_user\"));\n  })), HTML.IMG({\n    src: function() {\n      return [ \"/\", Spacebars.mustache(view.lookup(\"avatar\")) ];\n    },\n    \"class\": \"avatar_img\"\n  }), \"!\"), \"\\n\t\", HTML.DIV({\n    \"class\": \"row\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"col-md-12\"\n  }, \"\\n\t\t\t\", HTML.DIV({\n    \"class\": \"well well-lg\"\n  }, \"\\n\t\t\t\", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"messages\"));\n  }, function() {\n    return [ \"\\n\t\t\t\", Spacebars.include(view.lookupTemplate(\"chat_message\")), \"\\n\t\t\t\" ];\n  }), \"\\n\t\t\t\"), \"\t\\n\t\t\"), \"\\n\t\"), \"\\n    \", HTML.DIV({\n    \"class\": \"row\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"col-md-12\"\n  }, \"\\n\t\t\t\", HTML.FORM({\n    \"class\": \"js-send-chat\"\n  }, \"\\n\t\t\t\", HTML.Raw('<input class=\"input form-control\" type=\"text\" name=\"chat\" placeholder=\"type a message here...\">'), \"\\n\t\t\t\", HTML.P(\"\\n\t\t\t\", HTML.Raw(\"<br>\"), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":D\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":D\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \"o_o\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \"o_o\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":)\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":)\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":(\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":(\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \"-_-\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \"-_-\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":P\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":P\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":O\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":O\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \"8)\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \"8)\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":smirk:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":smirk:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":[\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":[\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":ninja:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":ninja:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":nerd:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":nerd:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":S\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":S\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":bashful:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":bashful:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":crying:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":crying:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":puke:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":puke:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":love:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":love:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":devil:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":devil:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":angel:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":angel:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \">:D\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \">:D\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":wtf:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":wtf:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":sweating:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":sweating:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":embarrassed:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":embarrassed:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \"x-D\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \"x-D\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \"O.o\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \"O.o\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \";)\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \";)\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":\\\\\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":\\\\\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":beer:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":beer:\"));\n  })), \"\\n\t\t\t\t\", HTML.A({\n    href: \"#\",\n    \"class\": \"js-add-emoji\",\n    title: \":poop:\"\n  }, Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), \":poop:\"));\n  })), \"\\n\t\t\t\"), \"\\n\t\t\t\", HTML.Raw('<button class=\"btn btn-info btn-lg\">Send</button>'), \"\\n\t\t\"), \"\\n\t\t\"), \"\\n\t\") ];\n}));\n\nTemplate.__checkName(\"chat_message\");\nTemplate[\"chat_message\"] = new Template(\"Template.chat_message\", (function() {\n  var view = this;\n  return [ HTML.DIV({\n    \"class\": \"row\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"col-md-1\"\n  }, \"\\n\t\t\t\", HTML.IMG({\n    src: function() {\n      return [ \"/\", Spacebars.mustache(view.lookup(\"avatar\")) ];\n    },\n    \"class\": \"avatar_img\"\n  }), \" \", HTML.Raw(\"<!-- display avatar -->\"), \"\\n\t\t\"), \"\\n\t\t\", HTML.DIV({\n    \"class\": \"col-md-11 text\"\n  }, \"\\n\t\t\t\", HTML.B(Blaze.View(\"lookup:username\", function() {\n    return Spacebars.mustache(view.lookup(\"username\"));\n  })), \" \", HTML.Raw(\"<!-- display username -->\"), \"\\n\t\t\t\", HTML.Raw(\"<br>\"), \"\\n\t\t\t\", Blaze.View(\"lookup:parseEmoticons\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"parseEmoticons\"), view.lookup(\"text\")));\n  }), \"\\n\t\t\"), \"\\n\t\"), HTML.Raw(\"\\n\t<br>\") ];\n}));\n"]}},{"type":"js","data":"(function(){\nTemplate.__checkName(\"lobby_page\");\nTemplate[\"lobby_page\"] = new Template(\"Template.lobby_page\", (function() {\n  var view = this;\n  return Spacebars.include(view.lookupTemplate(\"available_user_list\"));\n}));\n\nTemplate.__checkName(\"available_user_list\");\nTemplate[\"available_user_list\"] = new Template(\"Template.available_user_list\", (function() {\n  var view = this;\n  return [ HTML.Raw('<h2 class=\"header\">Choose someone to chat with:</h2>\\n\t'), HTML.DIV({\n    \"class\": \"row\"\n  }, \"\\n\t\", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"users\"));\n  }, function() {\n    return [ \"\\n\t\", Spacebars.include(view.lookupTemplate(\"available_user\")), \"\\n\t\" ];\n  }), \"\\n\") ];\n}));\n\nTemplate.__checkName(\"available_user\");\nTemplate[\"available_user\"] = new Template(\"Template.available_user\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"col-md-2\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"user_avatar\"\n  }, \"\\n\t\t\t\", Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"isMyUser\"), view.lookup(\"_id\"));\n  }, function() {\n    return [ \" \\n\t\t\t\", HTML.DIV({\n      \"class\": \"bg-success\"\n    }, Blaze.View(\"lookup:getUsername\", function() {\n      return Spacebars.mustache(view.lookup(\"getUsername\"), view.lookup(\"_id\"));\n    }), \" (YOU)\\n\t\t\t\t\", HTML.BR(), \"\\n\t\t\t\t\", HTML.IMG({\n      src: function() {\n        return [ \"/\", Spacebars.mustache(Spacebars.dot(view.lookup(\"profile\"), \"avatar\")) ];\n      },\n      \"class\": \"avatar_img\"\n    }), \"\t\t\t\\n\t\t\t\"), \"\\n\t\t\t\" ];\n  }, function() {\n    return [ \"\\n\t\t\t\", HTML.A({\n      href: function() {\n        return [ \"/chat/\", Spacebars.mustache(view.lookup(\"_id\")) ];\n      }\n    }, \"\\n\t\t\t\t\", Blaze.View(\"lookup:getUsername\", function() {\n      return Spacebars.mustache(view.lookup(\"getUsername\"), view.lookup(\"_id\"));\n    }), \"\\n\t\t\t\t\", HTML.BR(), \"\\n\t\t\t\t\", HTML.IMG({\n      src: function() {\n        return [ \"/\", Spacebars.mustache(Spacebars.dot(view.lookup(\"profile\"), \"avatar\")) ];\n      },\n      \"class\": \"avatar_img\"\n    }), \"\\n\t\t\t\"), \"\\n\t\t\t\" ];\n  }), \"\\n\t\t\"), \"\\n\t\");\n}));\n\n}).call(this);\n","servePath":"/client/template.lobby_page.js","sourceMap":{"version":3,"sources":["/client/template.lobby_page.js"],"names":[],"mappings":"YAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/client/template.lobby_page.js","sourcesContent":["\nTemplate.__checkName(\"lobby_page\");\nTemplate[\"lobby_page\"] = new Template(\"Template.lobby_page\", (function() {\n  var view = this;\n  return Spacebars.include(view.lookupTemplate(\"available_user_list\"));\n}));\n\nTemplate.__checkName(\"available_user_list\");\nTemplate[\"available_user_list\"] = new Template(\"Template.available_user_list\", (function() {\n  var view = this;\n  return [ HTML.Raw('<h2 class=\"header\">Choose someone to chat with:</h2>\\n\t'), HTML.DIV({\n    \"class\": \"row\"\n  }, \"\\n\t\", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"users\"));\n  }, function() {\n    return [ \"\\n\t\", Spacebars.include(view.lookupTemplate(\"available_user\")), \"\\n\t\" ];\n  }), \"\\n\") ];\n}));\n\nTemplate.__checkName(\"available_user\");\nTemplate[\"available_user\"] = new Template(\"Template.available_user\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"col-md-2\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"user_avatar\"\n  }, \"\\n\t\t\t\", Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"isMyUser\"), view.lookup(\"_id\"));\n  }, function() {\n    return [ \" \\n\t\t\t\", HTML.DIV({\n      \"class\": \"bg-success\"\n    }, Blaze.View(\"lookup:getUsername\", function() {\n      return Spacebars.mustache(view.lookup(\"getUsername\"), view.lookup(\"_id\"));\n    }), \" (YOU)\\n\t\t\t\t\", HTML.BR(), \"\\n\t\t\t\t\", HTML.IMG({\n      src: function() {\n        return [ \"/\", Spacebars.mustache(Spacebars.dot(view.lookup(\"profile\"), \"avatar\")) ];\n      },\n      \"class\": \"avatar_img\"\n    }), \"\t\t\t\\n\t\t\t\"), \"\\n\t\t\t\" ];\n  }, function() {\n    return [ \"\\n\t\t\t\", HTML.A({\n      href: function() {\n        return [ \"/chat/\", Spacebars.mustache(view.lookup(\"_id\")) ];\n      }\n    }, \"\\n\t\t\t\t\", Blaze.View(\"lookup:getUsername\", function() {\n      return Spacebars.mustache(view.lookup(\"getUsername\"), view.lookup(\"_id\"));\n    }), \"\\n\t\t\t\t\", HTML.BR(), \"\\n\t\t\t\t\", HTML.IMG({\n      src: function() {\n        return [ \"/\", Spacebars.mustache(Spacebars.dot(view.lookup(\"profile\"), \"avatar\")) ];\n      },\n      \"class\": \"avatar_img\"\n    }), \"\\n\t\t\t\"), \"\\n\t\t\t\" ];\n  }), \"\\n\t\t\"), \"\\n\t\");\n}));\n"]}},{"type":"js","data":"(function(){\nTemplate.body.addContent((function() {\n  var view = this;\n  return \"\";\n}));\nMeteor.startup(Template.body.renderToDocument);\n\nTemplate.__checkName(\"ApplicationLayout\");\nTemplate[\"ApplicationLayout\"] = new Template(\"Template.ApplicationLayout\", (function() {\n  var view = this;\n  return [ Blaze._TemplateWith(function() {\n    return \"header\";\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"yield\"));\n  }), \"\\n\t\\n\t\", HTML.DIV({\n    \"class\": \"container\"\n  }, \"\\n\t\", Blaze._TemplateWith(function() {\n    return \"main\";\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"yield\"));\n  }), \"\\n\t\") ];\n}));\n\n}).call(this);\n","servePath":"/client/template.minstant.js","sourceMap":{"version":3,"sources":["meteor://ðŸ’»app/client/template.minstant.js"],"names":[],"mappings":"YAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/client/template.minstant.js","sourcesContent":["\nTemplate.body.addContent((function() {\n  var view = this;\n  return \"\";\n}));\nMeteor.startup(Template.body.renderToDocument);\n\nTemplate.__checkName(\"ApplicationLayout\");\nTemplate[\"ApplicationLayout\"] = new Template(\"Template.ApplicationLayout\", (function() {\n  var view = this;\n  return [ Blaze._TemplateWith(function() {\n    return \"header\";\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"yield\"));\n  }), \"\\n\t\\n\t\", HTML.DIV({\n    \"class\": \"container\"\n  }, \"\\n\t\", Blaze._TemplateWith(function() {\n    return \"main\";\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"yield\"));\n  }), \"\\n\t\") ];\n}));\n"]}},{"type":"js","data":"(function(){\nTemplate.__checkName(\"navbar\");\nTemplate[\"navbar\"] = new Template(\"Template.navbar\", (function() {\n  var view = this;\n  return HTML.NAV({\n    \"class\": \"navbar navbar-default\"\n  }, \"\\n  \", HTML.DIV({\n    \"class\": \"container-fluid\"\n  }, \"\\n    \", HTML.Raw('<div class=\"navbar-header\">\\n      <a class=\"navbar-brand\" href=\"/\">\\n        Minstant!\\n      </a>\\n    </div>'), \"\\n    \", HTML.DIV({\n    \"class\": \"nav navbar-nav\"\n  }, \"\\n    \", Spacebars.include(view.lookupTemplate(\"loginButtons\")), \"\\n\"), \"\\n  \"), \"\\n\");\n}));\n\n}).call(this);\n","servePath":"/client/template.navbar.js","sourceMap":{"version":3,"sources":["meteor://ðŸ’»app/client/template.navbar.js"],"names":[],"mappings":"YAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/client/template.navbar.js","sourcesContent":["\nTemplate.__checkName(\"navbar\");\nTemplate[\"navbar\"] = new Template(\"Template.navbar\", (function() {\n  var view = this;\n  return HTML.NAV({\n    \"class\": \"navbar navbar-default\"\n  }, \"\\n  \", HTML.DIV({\n    \"class\": \"container-fluid\"\n  }, \"\\n    \", HTML.Raw('<div class=\"navbar-header\">\\n      <a class=\"navbar-brand\" href=\"/\">\\n        Minstant!\\n      </a>\\n    </div>'), \"\\n    \", HTML.DIV({\n    \"class\": \"nav navbar-nav\"\n  }, \"\\n    \", Spacebars.include(view.lookupTemplate(\"loginButtons\")), \"\\n\"), \"\\n  \"), \"\\n\");\n}));\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// lib/collections.js                                                  //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n//collections                                                          //\nChats = new Mongo.Collection(\"chats\");                                 // 2\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/lib/collections.js","sourceMap":{"version":3,"sources":["meteor://ðŸ’»app/lib/collections.js"],"names":[],"mappings":";;;;;;;;;AACA,KAAK,GAAG,IAAI,KAAK,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,qC","file":"/lib/collections.js","sourcesContent":["//collections\r\nChats = new Mongo.Collection(\"chats\");\r\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/main.js                                                      //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n//subscription, read access to collections                             //\nMeteor.subscribe(\"chats\");                                             // 2\nMeteor.subscribe(\"users\");                                             // 3\n                                                                       //\n// set up the main template the the router will use to build pages     //\nRouter.configure({                                                     // 6\n  layoutTemplate: 'ApplicationLayout'                                  // 7\n});                                                                    //\n// specify the top level route, the page users see when they arrive at the site\nRouter.route('/', function () {                                        // 10\n  console.log(\"rendering root /\");                                     // 11\n  this.render(\"navbar\", { to: \"header\" });                             // 12\n  this.render(\"lobby_page\", { to: \"main\" });                           // 13\n});                                                                    //\n                                                                       //\n// specify a route that allows the current user to chat to another users\nRouter.route('/chat/:_id', function () {                               // 17\n  // the user they want to chat to has id equal to                     //\n  // the id sent in after /chat/...                                    //\n  var otherUserId = this.params._id;                                   // 20\n  // set id to other user                                              //\n  Session.set(\"otherUserId\", otherUserId);                             // 22\n  //Save the id to the session                                         //\n  var id = Meteor.call(\"getChatId\", Meteor.userId(), otherUserId, function (err, res) {\n    if (!err) {                                                        // 25\n      Session.set(\"chatId\", res);                                      // 26\n    }                                                                  //\n  });                                                                  //\n  this.render(\"navbar\", { to: \"header\" });                             // 29\n  this.render(\"chat_page\", { to: \"main\" });                            // 30\n});                                                                    //\n                                                                       //\n///                                                                    //\n// helper functions                                                    //\n///                                                                    //\nTemplate.available_user_list.helpers({                                 // 36\n  users: function () {                                                 // 37\n    return Meteor.users.find();                                        // 38\n  }                                                                    //\n});                                                                    //\nTemplate.available_user.helpers({                                      // 41\n  getUsername: function (userId) {                                     // 42\n    user = Meteor.users.findOne({ _id: userId });                      // 43\n    return user.profile.username;                                      // 44\n  },                                                                   //\n  isMyUser: function (userId) {                                        // 46\n    if (userId == Meteor.userId()) {                                   // 47\n      return true;                                                     // 48\n    } else {                                                           //\n      return false;                                                    // 51\n    }                                                                  //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.chat_page.helpers({                                           // 57\n  messages: function () {                                              // 58\n    Meteor.call(\"addMessages\", Session.get(\"chatId\"), function (err, res) {\n      if (!err) {                                                      // 60\n        // all good                                                    //\n        Session.set(\"messages\", res);                                  // 61\n      }                                                                //\n    });                                                                //\n    return Session.get(\"messages\");                                    // 64\n  },                                                                   //\n  other_user: function () {                                            // 66\n    var otherUser = Meteor.users.findOne({ _id: Session.get(\"otherUserId\") });\n    if (otherUser) {                                                   // 68\n      return otherUser.profile.username;                               // 69\n      console.log(\"other\");                                            // 70\n    }                                                                  //\n  },                                                                   //\n  avatar: function () {                                                // 73\n    var otherUser = Meteor.users.findOne({ _id: Session.get(\"otherUserId\") });\n    if (otherUser) {                                                   // 75\n      return otherUser.profile.avatar;                                 // 76\n    }                                                                  //\n  }                                                                    //\n});                                                                    //\n                                                                       //\n///////                                                                //\n//Events                                                               //\n///////                                                                //\n                                                                       //\nTemplate.chat_page.events({                                            // 85\n  // this event fires when the user sends a message on the chat page   //\n  'submit .js-send-chat': function (event) {                           // 87\n    // stop the form from triggering a page reload                     //\n    event.preventDefault();                                            // 89\n    // see if we can find a chat object in the database                //\n    // to which we'll add the message                                  //\n    if (!Meteor.user()) {                                              // 92\n      // user not available                                            //\n      alert(\"You need to login first!\");                               // 93\n    }                                                                  //\n    var chat = Chats.findOne({ _id: Session.get(\"chatId\") });          // 95\n    if (chat) {                                                        // 96\n      // ok - we have a chat to use                                    //\n      var msgs = chat.messages; // pull the messages property          // 97\n      if (!msgs) {                                                     // 98\n        // no messages yet, create a new array                         //\n        msgs = [];                                                     // 99\n      }                                                                //\n      // is a good idea to insert data straight from the form          //\n      // (i.e. the user) into the database?? certainly not.            //\n      // push adds the message to the end of the array                 //\n      // adding username and avatar to message                         //\n      msgs.push({ text: event.target.chat.value, username: Meteor.user().profile.username, avatar: Meteor.user().profile.avatar });\n      // reset the form                                                //\n      event.target.chat.value = \"\";                                    // 107\n      // put the messages array onto the chat object                   //\n      chat.messages = msgs;                                            // 109\n      // update the chat object in the database.                       //\n      // Chats.update(chat._id, chat);                                 //\n      console.log(\"You add a doc!\");                                   // 112\n      Meteor.call(\"update\", chat._id, chat);                           // 113\n    }                                                                  //\n  },                                                                   //\n  \"click .js-add-emoji\": function (event) {                            // 116\n    event.preventDefault();                                            // 117\n    var target, emoji;                                                 // 118\n    target = event.currentTarget;                                      // 119\n    emoji = target.title;                                              // 120\n    console.log(emoji);                                                // 121\n    var before = $(\"input\").val();                                     // 122\n    var after = before + \" \" + emoji;                                  // 123\n    $(\"input\").val(after);                                             // 124\n  }                                                                    //\n});                                                                    //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/main.js","sourceMap":{"version":3,"sources":["meteor://ðŸ’»app/client/main.js"],"names":[],"mappings":"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","file":"/client/main.js","sourcesContent":["//subscription, read access to collections\r\nMeteor.subscribe(\"chats\");\r\nMeteor.subscribe(\"users\");\r\n\r\n// set up the main template the the router will use to build pages\r\nRouter.configure({\r\n  layoutTemplate: 'ApplicationLayout'\r\n});\r\n// specify the top level route, the page users see when they arrive at the site\r\nRouter.route('/', function () {\r\n  console.log(\"rendering root /\");\r\n  this.render(\"navbar\", {to:\"header\"});\r\n  this.render(\"lobby_page\", {to:\"main\"});  \r\n});\r\n\r\n// specify a route that allows the current user to chat to another users\r\nRouter.route('/chat/:_id', function () {\r\n  // the user they want to chat to has id equal to \r\n  // the id sent in after /chat/... \r\n  var otherUserId = this.params._id;\r\n  // set id to other user\r\n  Session.set(\"otherUserId\", otherUserId);\r\n  //Save the id to the session\r\n  var id = Meteor.call(\"getChatId\", Meteor.userId(), otherUserId, function(err, res){\r\n    if(!err){\r\n      Session.set(\"chatId\", res);\r\n    }\r\n  });\r\n  this.render(\"navbar\", {to:\"header\"});\r\n  this.render(\"chat_page\", {to:\"main\"});  \r\n});\r\n\r\n///\r\n// helper functions \r\n/// \r\nTemplate.available_user_list.helpers({\r\n  users:function(){\r\n    return Meteor.users.find();\r\n  }\r\n})\r\nTemplate.available_user.helpers({\r\n  getUsername:function(userId){\r\n    user = Meteor.users.findOne({_id:userId});\r\n    return user.profile.username;\r\n  }, \r\n  isMyUser:function(userId){\r\n    if (userId == Meteor.userId()){\r\n      return true;\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n})\r\n\r\n\r\nTemplate.chat_page.helpers({\r\n  messages:function(){\r\n    Meteor.call(\"addMessages\", Session.get(\"chatId\"), function(err, res){\r\n      if(!err){ // all good\r\n        Session.set(\"messages\", res);\r\n      }\r\n    }); \r\n    return Session.get(\"messages\");\r\n  }, \r\n  other_user:function(){\r\n    var otherUser = Meteor.users.findOne({_id:Session.get(\"otherUserId\")});\r\n    if(otherUser){\r\n      return otherUser.profile.username;\r\n      console.log(\"other\");\r\n    }\r\n  },\r\n  avatar:function(){\r\n    var otherUser = Meteor.users.findOne({_id:Session.get(\"otherUserId\")});\r\n    if(otherUser){\r\n      return otherUser.profile.avatar;\r\n    }\r\n  }\r\n})\r\n\r\n///////\r\n//Events\r\n///////\r\n\r\nTemplate.chat_page.events({\r\n// this event fires when the user sends a message on the chat page\r\n  'submit .js-send-chat':function(event){\r\n    // stop the form from triggering a page reload\r\n    event.preventDefault();\r\n    // see if we can find a chat object in the database\r\n    // to which we'll add the message\r\n    if(!Meteor.user()){ // user not available\r\n        alert(\"You need to login first!\");\r\n      }\r\n    var chat = Chats.findOne({_id:Session.get(\"chatId\")});\r\n    if (chat){// ok - we have a chat to use\r\n      var msgs = chat.messages; // pull the messages property\r\n      if (!msgs){// no messages yet, create a new array\r\n        msgs = [];\r\n      }\r\n      // is a good idea to insert data straight from the form\r\n      // (i.e. the user) into the database?? certainly not. \r\n      // push adds the message to the end of the array\r\n      // adding username and avatar to message\r\n      msgs.push({text: event.target.chat.value, username: Meteor.user().profile.username, avatar: Meteor.user().profile.avatar});\r\n      // reset the form\r\n      event.target.chat.value = \"\";\r\n      // put the messages array onto the chat object\r\n      chat.messages = msgs;\r\n      // update the chat object in the database.\r\n      // Chats.update(chat._id, chat);\r\n      console.log(\"You add a doc!\");\r\n      Meteor.call(\"update\", chat._id, chat);\r\n    }\r\n  },\r\n  \"click .js-add-emoji\": function(event){\r\n    event.preventDefault();\r\n    var target, emoji;\r\n    target = event.currentTarget;\r\n    emoji = target.title; \r\n    console.log(emoji);\r\n    var before = $(\"input\").val();\r\n    var after = before + \" \" + emoji;\r\n    $(\"input\").val(after);\r\n  }\r\n})\r\n\r\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// share/main.js                                                       //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\nMeteor.methods({                                                       // 1\n  getChatId: function (user1Id, user2Id) {                             // 2\n    // find a chat that has two users that match current user id       //\n    // and the requested user id                                       //\n    var filter = { $or: [{ user1Id: Meteor.userId(), user2Id: user2Id }, { user2Id: Meteor.userId(), user1Id: user2Id }] };\n    var chat = Chats.findOne(filter);                                  // 9\n    if (!chat) {                                                       // 10\n      // no chat matching the filter - need to insert a new one        //\n      var chatId = Chats.insert({ user1Id: user1Id, user2Id: user2Id });\n      return chatId;                                                   // 12\n    }                                                                  //\n    // there is a chat going already - use that.                       //\n    return chat._id;                                                   // 15\n  },                                                                   //\n  // adding new messages                                               //\n  addMessages: function (chatId) {                                     // 18\n    console.log(\"addMessages method running!\");                        // 19\n    if (!this.userId) {                                                // 20\n      // we have a user                                                //\n      return; // give up                                               // 21\n    } else {                                                           //\n        var chat = Chats.findOne({ _id: chatId });                     // 24\n        if (chat) {                                                    // 25\n          return chat.messages;                                        // 26\n        }                                                              //\n      }                                                                //\n  },                                                                   //\n  //update messages                                                    //\n  update: function (chatId, chat) {                                    // 31\n    console.log(\"update method \");                                     // 32\n    Chats.update(chatId, chat);                                        // 33\n  }                                                                    //\n});                                                                    //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/share/main.js","sourceMap":{"version":3,"sources":["meteor://ðŸ’»app/share/main.js"],"names":[],"mappings":";;;;;;;;AAAA,MAAM,CAAC,OAAO,CAAC;AACb,WAAS,EAAC,UAAS,OAAO,EAAE,OAAO,EAAC;;;AAGlC,QAAI,MAAM,GAAG,EAAC,GAAG,EAAC,CACR,EAAC,OAAO,EAAC,MAAM,CAAC,MAAM,EAAE,EAAE,OAAO,EAAC,OAAO,EAAC,EAC1C,EAAC,OAAO,EAAC,MAAM,CAAC,MAAM,EAAE,EAAE,OAAO,EAAC,OAAO,EAAC,CACzC,EAAC,CAAC;AACb,QAAI,IAAI,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACjC,QAAI,CAAC,IAAI,EAAC;;AACR,UAAI,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC,EAAC,OAAO,EAAC,OAAO,EAAE,OAAO,EAAC,OAAO,EAAC,CAAC,CAAC;AAC9D,aAAO,MAAM,CAAC;KACf;;AAEC,WAAO,IAAI,CAAC,GAAG,CAAC;GACnB;;AAED,aAAW,EAAC,UAAS,MAAM,EAAC;AAC1B,WAAO,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;AAC3C,QAAG,CAAC,IAAI,CAAC,MAAM,EAAC;;AACb,aAAO;KACT,MACG;AACF,YAAI,IAAI,GAAG,KAAK,CAAC,OAAO,CAAC,EAAC,GAAG,EAAC,MAAM,EAAC,CAAC,CAAC;AACvC,YAAG,IAAI,EAAC;AACN,iBAAO,IAAI,CAAC,QAAQ,CAAC;SACtB;OACF;GACF;;AAED,QAAM,EAAC,UAAS,MAAM,EAAE,IAAI,EAAC;AAC3B,WAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;AAC9B,SAAK,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;GAC5B;CACF,CAAC,uE","file":"/share/main.js","sourcesContent":["Meteor.methods({ \r\n  getChatId:function(user1Id, user2Id){\r\n    // find a chat that has two users that match current user id\r\n    // and the requested user id\r\n    var filter = {$or:[\r\n              {user1Id:Meteor.userId(), user2Id:user2Id}, \r\n              {user2Id:Meteor.userId(), user1Id:user2Id}\r\n              ]};\r\n    var chat = Chats.findOne(filter);\r\n    if (!chat){// no chat matching the filter - need to insert a new one\r\n      var chatId = Chats.insert({user1Id:user1Id, user2Id:user2Id});\r\n      return chatId;\r\n    }\r\n    // there is a chat going already - use that. \r\n      return chat._id;\r\n  },\r\n  // adding new messages\r\n  addMessages:function(chatId){\r\n    console.log(\"addMessages method running!\");\r\n    if(!this.userId){ // we have a user\r\n       return; // give up\r\n    }\r\n    else{\r\n      var chat = Chats.findOne({_id:chatId});\r\n      if(chat){\r\n        return chat.messages;\r\n      }\r\n    }\r\n  },\r\n  //update messages\r\n  update:function(chatId, chat){\r\n    console.log(\"update method \");\r\n    Chats.update(chatId, chat);\r\n  }\r\n})"]}}]